create table dcpt;

use dcpt;

CREATE TABLE acs (
  account_id INT(11) NOT NULL AUTO_INCREMENT,
  name VARCHAR(45) NOT NULL,
  password VARCHAR(45) NOT NULL,
  role VARCHAR(45) NOT NULL,
  PRIMARY KEY (account_id),
  UNIQUE KEY unique_acs_name (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE carts (
  item_id INT(11) NOT NULL,
  item_name VARCHAR(45) NOT NULL,
  item_price DECIMAL(12,2) NOT NULL,
  cart_amount INT(11) NOT NULL,
  PRIMARY KEY (item_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE help_request (
  help_id INT(11) NOT NULL AUTO_INCREMENT,
  account_id INT(11) NOT NULL,
  name VARCHAR(75),
  help_descrip VARCHAR(9000) NOT NULL,
  reply_descrip VARCHAR(9000),
  PRIMARY KEY (help_id),
  FOREIGN KEY (account_id) REFERENCES acs(account_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE items (
  item_id INT(11) NOT NULL AUTO_INCREMENT,
  item_name VARCHAR(45) NOT NULL,
  item_category VARCHAR(45),
  item_price DECIMAL(10,2) NOT NULL,
  item_quantity INT(11),
  item_description VARCHAR(2000),
  PRIMARY KEY (item_id),
  UNIQUE KEY unique_item_name (item_name),
  UNIQUE KEY unique_item_description (item_description)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE order_description (
  order_id INT(11) NOT NULL AUTO_INCREMENT,
  account_id INT(11),
  price DECIMAL(11,2),
  date_ordered DATE,
  order_description VARCHAR(1000),
  PRIMARY KEY (order_id),
  FOREIGN KEY (account_id) REFERENCES acs(account_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE pawn_request (
  request_id INT(11) NOT NULL AUTO_INCREMENT,
  account_id INT(11),
  collateral_name VARCHAR(45),
  collateral_category VARCHAR(45),
  requested_ammount DECIMAL(10,2),
  process ENUM('ongoing','accepted','rejected'),
  PRIMARY KEY (request_id),
  FOREIGN KEY (account_id) REFERENCES acs(account_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE staffs (
  staff_id INT(11) NOT NULL AUTO_INCREMENT,
  account_id INT(11) NOT NULL,
  staff_salary DECIMAL(10,2) NOT NULL,
  name VARCHAR(100) NOT NULL,
  position ENUM('Appraiser','Cashier','Stock Manager','Manager'),
  PRIMARY KEY (staff_id),
  FOREIGN KEY (account_id) REFERENCES acs(account_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE transaction (
  transaction_id INT(11) NOT NULL AUTO_INCREMENT,
  request_id INT(11),
  account_id INT(11),
  pawned_ammount DECIMAL(10,2),
  date_pawned DATETIME,
  date_due DATETIME,
  t_status ENUM('ongoing','redeemed','forfeited'),
  collateral VARCHAR(45),
  collateral_category VARCHAR(45),
  PRIMARY KEY (transaction_id),
  FOREIGN KEY (request_id) REFERENCES pawn_request(request_id),
  FOREIGN KEY (account_id) REFERENCES acs(account_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
